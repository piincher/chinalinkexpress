/**
 * CSS Scroll-Driven Animations
 * 
 * Zero JavaScript overhead - uses native CSS animation-timeline: view()
 * Progressive enhancement with @supports feature detection
 * 
 * Browser Support:
 * - Chrome/Edge 115+ (full support)
 * - Safari (behind flag)
 * - Firefox (in development)
 * 
 * Falls back to no animation on unsupported browsers
 */

/* ==========================================================================
   Keyframes Definitions
   ========================================================================== */

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* ==========================================================================
   Scroll-Driven Animation Utilities
   Progressive enhancement with @supports
   ========================================================================== */

@supports (animation-timeline: view()) {
  /* Base class for all scroll-driven animations */
  .scroll-animate {
    animation-fill-mode: both;
    animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Fade In - Simple opacity transition */
  .scroll-fade-in {
    animation-name: fade-in;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  /* Fade In Up - Opacity + translateY */
  .scroll-fade-in-up {
    animation-name: fade-in-up;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  /* Scale In - Opacity + scale */
  .scroll-scale-in {
    animation-name: scale-in;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  /* Slide In Left - Opacity + translateX from left */
  .scroll-slide-in-left {
    animation-name: slide-in-left;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  /* Slide In Right - Opacity + translateX from right */
  .scroll-slide-in-right {
    animation-name: slide-in-right;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  /* ==========================================================================
     Extended Animation Ranges
     ========================================================================== */

  /* Quick reveal - faster entry animation */
  .scroll-quick {
    animation-range: entry 0% cover 15%;
  }

  /* Slow reveal - more gradual animation */
  .scroll-slow {
    animation-range: entry 0% cover 40%;
  }

  /* Full coverage - animates throughout viewport */
  .scroll-full {
    animation-range: entry 0% exit 100%;
  }

  /* Exit animation - animates on leaving viewport */
  .scroll-exit {
    animation-range: exit 0% exit 50%;
  }

  /* ==========================================================================
     Stagger Utilities
     Use with nth-child for staggered effects
     ========================================================================== */

  .scroll-stagger > *:nth-child(1) { animation-delay: 0ms; }
  .scroll-stagger > *:nth-child(2) { animation-delay: 50ms; }
  .scroll-stagger > *:nth-child(3) { animation-delay: 100ms; }
  .scroll-stagger > *:nth-child(4) { animation-delay: 150ms; }
  .scroll-stagger > *:nth-child(5) { animation-delay: 200ms; }
  .scroll-stagger > *:nth-child(6) { animation-delay: 250ms; }
  .scroll-stagger > *:nth-child(7) { animation-delay: 300ms; }
  .scroll-stagger > *:nth-child(8) { animation-delay: 350ms; }
  .scroll-stagger > *:nth-child(9) { animation-delay: 400ms; }
  .scroll-stagger > *:nth-child(10) { animation-delay: 450ms; }

  /* ==========================================================================
     Reduced Motion Support
     ========================================================================== */

  @media (prefers-reduced-motion: reduce) {
    .scroll-fade-in,
    .scroll-fade-in-up,
    .scroll-scale-in,
    .scroll-slide-in-left,
    .scroll-slide-in-right {
      animation: none;
      opacity: 1;
      transform: none;
    }
  }
}

/* ==========================================================================
   Fallback for Unsupported Browsers
   Elements are visible by default, no animation
   ========================================================================== */

@supports not (animation-timeline: view()) {
  .scroll-fade-in,
  .scroll-fade-in-up,
  .scroll-scale-in,
  .scroll-slide-in-left,
  .scroll-slide-in-right {
    opacity: 1;
    transform: none;
  }
}

/* ==========================================================================
   CSS Custom Properties for Dynamic Control
   ========================================================================== */

:root {
  /* Animation timing */
  --scroll-animation-duration: 0.6s;
  --scroll-animation-easing: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  
  /* Entry threshold */
  --scroll-entry-start: 0%;
  --scroll-entry-end: 25%;
  
  /* Transform distances */
  --scroll-fade-distance: 30px;
  --scroll-scale-start: 0.95;
}

/* ==========================================================================
   Section-Specific Animation Presets
   ========================================================================== */

/* Hero section - subtle scale effect */
.scroll-hero {
  animation-name: scale-in;
  animation-timeline: view();
  animation-range: entry 0% cover 50%;
}

/* Cards - fade in up with stagger */
.scroll-card {
  animation-name: fade-in-up;
  animation-timeline: view();
  animation-range: entry 10% cover 30%;
}

/* Features - slide from sides */
.scroll-feature-left {
  animation-name: slide-in-left;
  animation-timeline: view();
  animation-range: entry 0% cover 25%;
}

.scroll-feature-right {
  animation-name: slide-in-right;
  animation-timeline: view();
  animation-range: entry 0% cover 25%;
}

/* Text blocks - fade in */
.scroll-text {
  animation-name: fade-in;
  animation-timeline: view();
  animation-range: entry 5% cover 20%;
}
